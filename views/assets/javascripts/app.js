"use strict";$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").removeClass("qor-alert__active")}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').removeClass("qor-alert__active")},5e3)}),$(function(){$(document).on("click",".qor-dialog--global-search",function(e){e.stopPropagation(),$(e.target).parents(".qor-dialog-content").length||$(e.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(e){e.preventDefault();var o=$(this).data(),t=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',o);$("body").append(t),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var l=[],n="qoradmin_menu_status",e=localStorage.getItem(n);e&&e.length&&(l=e.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var e=$(this),o=e.parent(),t=e.next("ul"),a=o.attr("qor-icon-name");t.length&&(t.hasClass("in")?(l.push(a),o.removeClass("is-expanded"),t.one("transitionend",function(){t.removeClass("collapsing in")}).addClass("collapsing").height(0)):(l=_.without(l,a),o.addClass("is-expanded"),t.one("transitionend",function(){t.removeClass("collapsing")}).addClass("collapsing in").height(t.prop("scrollHeight"))),localStorage.setItem(n,l))}).find("> ul > li > a").each(function(){var e=$(this),o=e.parent(),t=e.next("ul"),a=o.attr("qor-icon-name");t.length&&(t.addClass("collapse"),o.addClass("has-menu"),-1!=l.indexOf(a)?t.height(0):(o.addClass("is-expanded"),t.addClass("in").height(t.prop("scrollHeight"))))});var o=$(".qor-page > .qor-page__header"),t=$(".qor-page > .qor-page__body"),a=o.find(".qor-page-subnav__header").length?96:48;o.length&&(o.height()>a&&t.css("padding-top",o.height()),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){$(".qor-page__header").toggleClass("actions-show")})}),$(function(){function u(){return m.hasClass("qor-bottomsheets-open")}var g,p,m=$("body"),f="is-selected";function q(e){$("[data-url]").removeClass(f),e&&e.length&&e.addClass(f)}m.qorBottomSheets(),m.qorSlideout(),g=m.data("qor.slideout"),p=m.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(e){console.log("TEST DEBUG",e);var o,t=$(this),a=$(e.target),l=t.hasClass("qor-button--new"),n=t.hasClass("qor-button--edit"),s=(t.is(".qor-table tr[data-url]")||t.closest(".qor-js-table").length)&&!t.closest(".qor-slideout").length,r=t.data(),i=r.openType,d=t.parents(".qor-theme-slideout").length,c=t.closest(".qor-slideout").length,h=t.hasClass("qor-action-button")||t.hasClass("qor-action--button");if(e.stopPropagation(),!(t.data("ajax-form")||a.closest(".qor-table--bulking").length||a.closest(".qor-button--actions").length||!a.data("url")&&a.is("a")||s&&u()))if("window"!=i){if("new_window"!=i){h&&(o=function(){try{if(IsSingleton)return[0]}catch(e){}var e=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),o=[];return!!e.length&&(e.each(function(){o.push($(this).closest("tr").data("primary-key"))}),o)}())&&(console.log("action",o,r),r=$.extend({},r,{actionData:o})),r.$target=a;try{if(IsSingleton&&!0===IsSingleton)return console.log("OPEN",r,p),p.open(r),!1}catch(e){}return r.method&&"GET"!==r.method.toUpperCase()?void 0:("bottomsheet"!=i&&!h||"slideout"==i?"slideout"==i||s||l&&!u()||n?"slideout"==i||d?t.hasClass(f)?(g.hide(),q()):(g.open(r),q(t)):(console.log(145),window.location.href=r.url):m.hasClass("qor-slideout-open")||l&&u()?p.open(r):d?g.open(r):p.open(r):h&&!o&&t.closest('[data-toggle="qor.action.bulk"]').length&&!c?window.QOR.qorConfirm(r.errorNoItem):p.open(r),!1)}window.open(r.url,"_blank")}else window.location.href=r.url})}),$(function(){var l=window.location;$(".qor-search").each(function(){var e=$(this),o=e.find(".qor-search__input"),t=e.find(".qor-search__clear"),a=!!o.val();e.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),t.on("click",function(){o.val()||a?"?"==l.search.replace(new RegExp(o.attr("name")+"\\=?\\w*"),"")?l.href=l.href.split("?")[0]:l.search=l.search.replace(new RegExp(o.attr("name")+"\\=?\\w*"),""):e.removeClass("is-dirty")})})});